(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){},16:function(e,t,a){e.exports=a(28)},21:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(14),r=a.n(i),s=(a(21),a(4)),c=a(5),l=a(8),d=a(6),u=a(7),p=(a(13),a(9)),m=[{name:"Inorbit Mall",position:{lat:17.4343693,lng:78.38442},venue_id:"4ba0debcf964a520768337e3"},{name:"Forum Sujana Mall",position:{lat:17.4840214,lng:78.3866567},venue_id:"541193bb498e516757fdf7fa"},{name:"Manjeera Trinity Mall",position:{lat:17.4899643,lng:78.3909384},venue_id:"525800cc11d25864dcc09581"},{name:"City Center Mall",position:{lat:17.4145167,lng:78.4465899},venue_id:"4b645c79f964a52048ad2ae3"},{name:"PVR Next Galleria Mall",position:{lat:17.4290096,lng:78.4480587},venue_id:"5a8af33d9fca567a057ff31c"},{name:"PVR Icon",position:{lat:17.4478958,lng:78.3823586},venue_id:"5a8710ab3b4e00284ecece79"},{name:"SLN Terminus Mall",position:{lat:17.4523613,lng:78.3607897},venue_id:"561a76e6498e5335924cdfbb"},{name:"NSL Centrum Mall",position:{lat:17.483262,lng:78.3913397},venue_id:"4ed9d9d85c5c96a2fd9907e2"},{name:"Spencer's Mall",position:{lat:17.3698563,lng:78.4263488},venue_id:"50792dd6e4b0109f3532cf0e"}],f=a(15),h=a.n(f),b=a(1),g=a.n(b),v=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.marker;g()(".location-list li").click(function(){g()(".location-list .active").removeClass("active"),g()(this).addClass("active")}),e.addListener("click",function(){g()(".location-list .active").removeClass("active")}),g()(".location-list li").keypress(function(e){if(13===e.which)return g()(e.target).click(),!1})}},{key:"render",value:function(){var e=this,t=this.props.marker;return o.a.createElement("li",{tabIndex:"0",role:"button",onClick:function(){return e.props.openInfoBox(t)}},t.name)}}]),t}(n.Component),w=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.map;return o.a.createElement("div",{className:"sidebar","aria-label":"Sidebar Navigation","aria-modal":"true"},o.a.createElement("label",{htmlFor:"search"},"Enter the Mall Name"),o.a.createElement("input",{id:"search",tabIndex:"0","aria-label":"Search Malls",placeholder:"Search Malls",value:this.props.query,onChange:function(a){return e.props.updateResult(a.target.value,t)}}),o.a.createElement("ul",{className:"location-list"},this.props.searchedPlaces.map(function(a){return o.a.createElement(v,{key:a.name,className:"",map:t,marker:a,tips:e.props.tips,toggleSidebar:e.props.toggleSidebar,openInfoBox:e.props.openInfoBox})})))}}]),t}(n.Component);var k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={map:{loaded:!0},informationBox:{},allPlaces:m,markers:[],query:"",tips:[]},a.initMap=function(){var e=new window.google.maps.Map(document.getElementById("map"),{center:{lat:17.3924137,lng:78.4653866},zoom:11}),t=new window.google.maps.InfoWindow({content:"content"});a.setState({map:e,informationBox:t}),a.loadMarkers()},a.loadMarkers=function(){a.state.allPlaces.forEach(function(e){var t=a.addMarker(a.state.map,e);a.loadData(e,t)})},a.loadData=function(e,t){var n,o=a.state.tips,i=Object(p.a)(Object(p.a)(a)),r="https://api.foursquare.com/v2/venues/".concat(e.venue_id,"/tips?&client_id=").concat("JOM235CWVCY4NL3D30035XZHM2P2PBN0CDZ34FRGX2X25WTK","&client_secret=").concat("0TFK5GIHLWAVRNJ0KLOFIVCCAMK2ZACQBDIPP4NEDMK0VZXH","&v=20181026");fetch(r).then(function(a){a.json().then(function(r){n=200===a.status?r.response.tips.items[0]?{text:r.response.tips.items[0].text,name:e.name,position:e.position,feedback:r.response.tips.count}:{text:"No user feedback available",name:e.name,position:e.position,feedback:0}:{text:"Sorry, Unable to retrieve data from Foursquare",name:e.name,position:e.position,feedback:"No Data Fetched"},o.push(n),i.setState(o),i.loadMarkersData(n,t)}).catch(function(a){n={text:"Sorry, Unable to retrieve data from Foursquare",name:e.name,position:e.position,feedback:"No Data Fetched"},i.loadMarkersData(n,t)})}).catch(function(a){n={text:"Sorry, Unable to retrieve data from Foursquare",name:e.name,position:e.position,feedback:"No Data Fetched"},i.loadMarkersData(n,t)})},a.loadMarkersData=function(e,t){t.name=e.name,t.text=e.text,t.feedback=e.feedback},a.openInfoBox=function(e){var t,n=a.state.map;window.innerWidth<=991&&"open"===a.props.sidebar?(a.props.toggleSidebar(),t="open"):window.innerWidth>991&&(t="open"),e.setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){return e.setAnimation(null)},900),a.state.informationBox.setContent('\n        <div class="informationBox" tabIndex="1" aria-modal="true" aria-label="'.concat(e.name,' Information Window">\n            <div name="').concat(e.name,'">\n                <h3 tabIndex="1">').concat(e.name,'</h3>\n                <p tabIndex="1">').concat(e.text,'</p>\n                <p tabIndex="1">Total Feedbacks: ').concat(e.feedback,'</p>\n                <p tabIndex="-1">Data is fetched from Foursquare.</p>\n            </div>\n            </div>')),a.state.map.panTo(e.getPosition()),a.state.informationBox.open(n,e);var o=Object(p.a)(Object(p.a)(a));window.google.maps.event.addListener(a.state.informationBox,"domready",function(){g()("button.gm-ui-hover-effect img").attr("alt","close");var e=g()(".informationBox"),a=g()("button.gm-ui-hover-effect");a.attr("tabIndex","1"),e.focus(),a.keydown(function(t){9!==t.which||t.shiftKey||(t.preventDefault(),e.focus())}),e.keydown(function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),a.focus())}),a.keydown(function(e){13===e.which&&"open"===t&&(e.preventDefault(),a.click(),g()(".location-list li.active").focus(),window.innerWidth<=991&&"closed"===o.props.sidebar&&o.props.toggleSidebar())})})},a.addMarker=function(e,t){var n=a.state.markers;if(!e.loaded){var o=new window.google.maps.Marker({position:{lat:t.position.lat,lng:t.position.lng},map:e,name:t.name,animation:window.google.maps.Animation.DROP});return o.addListener("click",function(){a.setState({currentPlace:t}),a.state.informationBox.setContent("Loading Data..."),a.openInfoBox(o)}),o.addListener("mouseover",function(){var e=this;this.setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){return e.setAnimation(null)},400)}),n.push(o),a.setState({markers:n}),o}},a.updateResult=function(e,t){a.setState({query:e});var n=a.state.markers;n.forEach(function(n){n.name.toLowerCase().indexOf(e.toLowerCase())>=0?(n.setVisible(!0),a.state.informationBox.close(t,n)):n.setVisible(!1)}),a.setState({markers:n})},a.filterPlaces=function(e,t){var a;if(e){var n=new RegExp(h()(e),"i");a=t.filter(function(e){return n.test(e.name)})}else a=t;return a},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.initMap=this.initMap,function(e){var t=document.createElement("script");t.src=e,t.async=!0,document.head.appendChild(t),t.onerror=function(){alert("Sorry, Unable to load Google Maps.")}}("https://maps.googleapis.com/maps/api/js?key=AIzaSyB-Qm2gTBeiX0PiY14ijGy8JZ_s5S-OQH4&callback=initMap")}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.markers,a=e.map;if(!a.loaded){var n=new window.google.maps.LatLngBounds;t.forEach(function(e){return n.extend(e.position)}),a.fitBounds(n)}}},{key:"render",value:function(){var e=this.state,t=e.query,a=e.markers,n=this.filterPlaces(t,a);return o.a.createElement("main",{className:"container",role:"main"},o.a.createElement(w,{updateResult:this.updateResult,query:this.state.query,map:this.state.map,searchedPlaces:n,marker:this.state.markers,tips:this.state.tips,toggleSidebar:this.props.toggleSidebar,openInfoBox:this.openInfoBox}),o.a.createElement("div",{className:"map-container",tabIndex:"-1"},o.a.createElement("div",{id:"map",role:"application"})))}}]),t}(n.Component),y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={sidebar:"closed"},a.focusTrap=function(){if("closed"===a.state.sidebar){var e=g()("#hamburger-icon"),t=g()(".location-list li:last-child");t.keydown(function(t){9!==t.which||t.shiftKey||(t.preventDefault(),e.focus())}),e.keydown(function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),t.focus())})}},a.toggleSidebar=function(){"open"===a.state.sidebar?(a.setState({sidebar:"closed"}),g()(".sidebar").removeClass("showSidebar"),g()("#hamburger-icon").removeClass("change"),g()("#hamburger-icon").attr("aria-label","Open Sidebar Menu")):(a.setState({sidebar:"open"},a.focusTrap()),g()(".sidebar").addClass("showSidebar"),g()("#hamburger-icon").addClass("change"),g()("#hamburger-icon").attr("aria-label","Close Sidebar Menu"))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;g()("#hamburger-icon").keydown(function(e){if(13===e.which)return g()(e.target).click(),!1}),g()(".sidebar").keydown(function(t){27===t.which&&"open"===e.state.sidebar&&e.toggleSidebar()})}},{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement("header",{className:"header"},o.a.createElement("div",{className:"logo"},"Hyderabad Malls")),o.a.createElement("div",{id:"hamburger-icon",tabIndex:"0","aria-label":"Open Sidebar Menu",onClick:this.toggleSidebar},o.a.createElement("div",{className:"bar1"}),o.a.createElement("div",{className:"bar2"}),o.a.createElement("div",{className:"bar3"})),o.a.createElement(k,{google:this.props.google,toggleSidebar:this.toggleSidebar,sidebar:this.state.sidebar}))}}]),t}(n.Component),x=a(30),M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function S(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(caches.open("onejeet-react-app").then(function(e){return e.addAll(["/favicon.ico"])}),navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(o.a.createElement(x.a,{basename:"/react-neighbourhood-map"},o.a.createElement(y,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/react-neighbourhood-map",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/react-neighbourhood-map","/service-worker.js");M?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):S(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):S(e)})}}()}},[[16,2,1]]]);
//# sourceMappingURL=main.51097a04.chunk.js.map