(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(21)},16:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(9),r=a.n(i),c=(a(16),a(2)),s=a(3),l=a(5),u=a(4),d=a(6),f=(a(8),[{name:"Inorbit Mall",position:{lat:17.4343693,lng:78.38442},venue_id:"4ba0debcf964a520768337e3"},{name:"Forum Sujana Mall",position:{lat:17.4840214,lng:78.3866567},venue_id:"541193bb498e516757fdf7fa"},{name:"Manjeera Trinity Mall",position:{lat:17.4899643,lng:78.3909384},venue_id:"525800cc11d25864dcc09581"},{name:"City Center Mall",position:{lat:17.4145167,lng:78.4465899},venue_id:"4b645c79f964a52048ad2ae3"},{name:"PVR Next Galleria Mall",position:{lat:17.4290096,lng:78.4480587},venue_id:"5a8af33d9fca567a057ff31c"},{name:"PVR Icon",position:{lat:17.4478958,lng:78.3823586},venue_id:"5a8710ab3b4e00284ecece79"},{name:"SLN Terminus Mall",position:{lat:17.4523613,lng:78.3607897},venue_id:"561a76e6498e5335924cdfbb"},{name:"NSL Centrum Mall",position:{lat:17.483262,lng:78.3913397},venue_id:"4ed9d9d85c5c96a2fd9907e2"},{name:"Spencer's Mall",position:{lat:17.3698563,lng:78.4263488},venue_id:"50792dd6e4b0109f3532cf0e"}]),m=a(10),p=a.n(m),h=a(1),v=a.n(h),b=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).openMarker=function(){var e=a.props,t=e.map,n=e.informationBox,o=e.marker,i=e.toggleSidebar;window.innerWidth<=991&&i(),t.panTo(o.getPosition()),n.setContent('<div class="informationBox" tabIndex="1" aria-modal="true">\n                <div name="'.concat(o.title,'">\n                    <h3 tabIndex="1">').concat(o.title,'</h3>\n                    <p tabIndex="1">').concat(o.text,'</p>\n                    <p tabIndex="1">Total Feedbacks: ').concat(o.feedback,'</p>\n                    <p tabIndex="1">Data is fetched from Foursquare.</p>\n                </div>\n            </div>')),o.setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){o.setAnimation(null)},800),n.open(t,o),window.google.maps.event.addListener(n,"domready",function(){v()("button.gm-ui-hover-effect img").attr("alt","close");var e=v()(".location-list li.active"),t=v()(".informationBox"),a=v()("button.gm-ui-hover-effect");a.attr("tabIndex","1"),t.focus(),a.keydown(function(e){9!==e.which||e.shiftKey||(e.preventDefault(),t.focus())}),t.keydown(function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),a.focus())}),a.keydown(function(t){13===t.which&&(t.preventDefault(),a.click(),e.focus())})})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.marker;v()(".location-list li").click(function(){v()(".location-list .active").removeClass("active"),v()(this).addClass("active")}),e.addListener("click",function(){v()(".location-list .active").removeClass("active")}),v()(".location-list li").keypress(function(e){if(13===e.which)return v()(e.target).click(),!1})}},{key:"render",value:function(){var e=this.props.marker;return o.a.createElement("li",{tabIndex:"0",role:"button",onClick:this.openMarker},e.title)}}]),t}(n.Component),g=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.map,n=t.informationBox;return o.a.createElement("div",{className:"sidebar","aria-label":"Sidebar Navigation","aria-modal":"true"},o.a.createElement("label",{htmlFor:"search"},"Enter the Mall Name"),o.a.createElement("input",{id:"search",tabIndex:"0","aria-label":"Search Malls",placeholder:"Search Malls",value:this.props.query,onChange:function(t){return e.props.updateResult(t.target.value,a)}}),o.a.createElement("ul",{className:"location-list"},this.props.searchedPlaces.map(function(t){return o.a.createElement(b,{key:t.title,className:"",map:a,marker:t,toggleSidebar:e.props.toggleSidebar,informationBox:n})})))}}]),t}(n.Component);var w=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={map:{loaded:!0},informationBox:{},allPlaces:f,markers:[],query:"",tips:[]},a.initMap=function(){var e=new window.google.maps.Map(document.getElementById("map"),{center:{lat:17.3924137,lng:78.4653866},zoom:11});navigator.onLine&&navigator.serviceWorker.ready.then(function(t){return caches.open("onejeet-react-app").then(function(t){t.add(e)})}).catch(function(e){});var t=new window.google.maps.InfoWindow({content:"content"});a.setState({map:e,informationBox:t}),a.loadPlacesData()},a.loadPlacesData=function(){var e=a.state,t=e.tips,n=e.allPlaces,o=!0;n.forEach(function(e){var n="https://api.foursquare.com/v2/venues/".concat(e.venue_id,"/tips?&client_id=").concat("JOM235CWVCY4NL3D30035XZHM2P2PBN0CDZ34FRGX2X25WTK","&client_secret=").concat("0TFK5GIHLWAVRNJ0KLOFIVCCAMK2ZACQBDIPP4NEDMK0VZXH","&v=20181026");fetch(n).then(function(n){var o=n.clone();return n.json().then(function(o){var i;i=200===n.status?o.response.tips.items[0]?{text:o.response.tips.items[0].text,name:e.name,position:e.position,feedback:o.response.tips.count}:{text:"No user feedback available",name:e.name,position:e.position,feedback:0}:{text:"Sorry, Unable to retrieve data from Foursquare",name:e.name,position:e.position,feedback:"No Data Fetched"},t.push(i),a.setState(t),a.addMarker(a.state.map,i)}),o}).then(function(e){navigator.onLine&&navigator.serviceWorker.ready.then(function(t){return caches.open("onejeet-react-app").then(function(t){t.put(n,e),console.log("FourSquare Data Fetched & Cached")})})}).catch(function(){o&&alert("Sorry, Unable to retrieve data from Foursquare. Please try again later."),o=!1})})},a.addMarker=function(e,t){var n=a.state.markers;if(!e.loaded){var o=new window.google.maps.Marker({position:{lat:t.position.lat,lng:t.position.lng},map:e,text:t.text,title:t.name,feedback:t.feedback,animation:window.google.maps.Animation.DROP});o.addListener("click",function(){a.state.map.panTo(o.getPosition()),a.state.informationBox.setContent('\n            <div class="informationBox" tabIndex="1" aria-modal="true">\n                <div name="'.concat(o.title,'">\n                    <h3 tabIndex="1">').concat(o.title,'</h3>\n                    <p tabIndex="1">').concat(o.text,'</p>\n                    <p tabIndex="1">Total Feedbacks: ').concat(o.feedback,'</p>\n                    <p tabIndex="1">Data is fetched from Foursquare.</p>\n                </div>\n                </div>')),a.state.informationBox.open(e,o),window.google.maps.event.addListener(a.state.informationBox,"domready",function(){v()("button.gm-ui-hover-effect img").attr("alt","close");var e=v()(".informationBox"),t=v()("button.gm-ui-hover-effect");t.attr("tabIndex","1"),e.focus(),t.keydown(function(t){9!==t.which||t.shiftKey||(t.preventDefault(),e.focus())}),e.keydown(function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),t.focus())}),t.keydown(function(e){13===e.which&&(e.preventDefault(),t.click())})})}),o.addListener("mouseover",function(){var e=this;this.setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){return e.setAnimation(null)},400)}),n.push(o),a.setState({markers:n})}},a.updateResult=function(e,t){a.setState({query:e});var n=a.state.markers;n.forEach(function(n){n.title.toLowerCase().indexOf(e.toLowerCase())>=0?(n.setVisible(!0),a.state.informationBox.close(t,n)):n.setVisible(!1)}),a.setState({markers:n})},a.filterPlaces=function(e,t){var a;if(e){var n=new RegExp(p()(e),"i");a=t.filter(function(e){return n.test(e.title)})}else a=t;return a},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.initMap=this.initMap,function(e){var t=document.createElement("script");document.head.appendChild(t),t.src=e,t.async=!0}("https://maps.googleapis.com/maps/api/js?key=AIzaSyB-Qm2gTBeiX0PiY14ijGy8JZ_s5S-OQH4&callback=initMap")}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.markers,a=e.map;if(!a.loaded){var n=new window.google.maps.LatLngBounds;t.forEach(function(e){return n.extend(e.position)}),a.fitBounds(n)}}},{key:"render",value:function(){var e=this.state.query,t=this.state.markers,a=this.filterPlaces(e,t);return o.a.createElement("main",{className:"container",role:"main"},o.a.createElement(g,{updateResult:this.updateResult,query:this.state.query,map:this.state.map,searchedPlaces:a,marker:this.state.markers,informationBox:this.state.informationBox,toggleSidebar:this.props.toggleSidebar}),o.a.createElement("div",{className:"map-container",tabIndex:"-1"},o.a.createElement("div",{id:"map",role:"application"})))}}]),t}(n.Component),k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={sidebar:"closed"},a.focusTrap=function(){if("closed"===a.state.sidebar){var e=v()("#hamburger-icon"),t=v()(".location-list li:last-child");t.keydown(function(t){9!==t.which||t.shiftKey||(t.preventDefault(),e.focus())}),e.keydown(function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),t.focus())})}},a.toggleSidebar=function(){"open"===a.state.sidebar?(a.setState({sidebar:"closed"}),v()(".sidebar").removeClass("showSidebar"),v()("#hamburger-icon").removeClass("change"),v()("#hamburger-icon").attr("aria-label","Open Sidebar Menu")):(a.setState({sidebar:"open"},a.focusTrap()),v()(".sidebar").addClass("showSidebar"),v()("#hamburger-icon").addClass("change"),v()("#hamburger-icon").attr("aria-label","Close Sidebar Menu"))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){v()("#hamburger-icon").keydown(function(e){if(13===e.which)return v()(e.target).click(),!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement("header",{className:"header"},o.a.createElement("div",{className:"logo"},"Hyderabad Malls")),o.a.createElement("div",{id:"hamburger-icon",tabIndex:"0","aria-label":"Open Sidebar Menu",onClick:this.toggleSidebar},o.a.createElement("div",{className:"bar1"}),o.a.createElement("div",{className:"bar2"}),o.a.createElement("div",{className:"bar3"})),o.a.createElement(w,{google:this.props.google,toggleSidebar:this.toggleSidebar}))}}]),t}(n.Component),y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(o.a.createElement(k,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");y?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):x(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):x(e)})}}()},8:function(e,t,a){}},[[11,2,1]]]);
//# sourceMappingURL=main.3908b8e1.chunk.js.map